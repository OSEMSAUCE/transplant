@use '@picocss/pico/scss/pico' with (
	$theme-color: 'violet'
);

@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap');

:root {
	--pico-font-family: 'Roboto Mono', Consolas, Monaco, 'Courier New', monospace;
	--pico-background-color: var(--color-black);
	--color-purple: #8028de;
	--color-light-grey: #343434;
	--color-grey: #212121;
	--color-black: #121212;
	--color-white: #e0e0e0;
	--column-width: 7rem;
	--button-max-width: 28rem;
	--button-background: transparent;
	--button-color: var(--color-grey);
	--button-border: solid 0.5rem #343434 --button-padding: 2rem 2rem;
	--button-margin: 0.75rem 2rem;
	// --button-margin-bottom: 1rem;
	--button-radius: 0.25rem;
	--button-font-size: 1rem;
	--button-transition: all 0.3s ease;
	--header-background: #2f1e4b;
}
body,
html {
	background-color: var(--color-black);
	margin: 0rem;
	// font-size: 12px;
}

th {
  height: 2.7rem !important;
  min-height: 2.7rem !important;
  max-height: 2.7rem !important;
  vertical-align: middle !important;
  box-sizing: border-box !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

td {
  height: 1.5rem !important;
  min-height: 1.6rem !important;
  max-height: 1.6rem !important;
  vertical-align: middle !important;
  box-sizing: border-box !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

p {
	font-size: 0.5rem;
}
.container,
table,
th,
td,
select {
	background-color: var(--color-black);
}
.land-table td[class^="col-"],
.land-table th[class^="col-"] {
	border: 0.05rem solid var(--color-light-grey) !important;
}

nav {
	display: flex;
	justify-content: flex-start !important;
	padding: -0.15rem 0;
	margin: -1rem 0 0 0;
}
nav a {
	padding: 0.15rem 0.2rem;
	margin: 0 0.2rem 0 0;
	color: var(--color-purple) !important;
	background: none;
	border: none;
	font-size: inherit;
	line-height: inherit;
	text-decoration: underline;
	text-decoration-color: var(--color-purple);
	transition:
		color 0.2s,
		text-decoration-color 0.2s;
}
nav a:hover {
	color: #b663df !important;
	text-decoration-color: var(--color-purple);
}

h1 {
	color: var(--color-white);
}

th {
	font-size: 0.6rem;
	height: 2.8rem; // or whatever your standard is
	min-height: 2.8rem;
	max-height: 2.8rem;
	// padding-top: 0.3rem;
	// padding-bottom: 0.5rem;
	background: var(--header-background) !important;
	padding-left: 0.2rem !important; // leave important
	padding-right: 0.2rem !important;
	overflow: hidden;
}

button {
	border: 0.04rem solid var(--color-light-grey);
	box-sizing: border-box; // Ensures border doesn't affect button dimensions
	margin-bottom: 0.5rem;
}
select {
	border: 0.04rem solid var(--color-light-grey);
	box-sizing: border-box; // Ensures border doesn't affect button dimensions
}

table {
	border: 0.04rem solid var(--color-light-grey); // LEAVE THIS ONE ALSO. Chris 4 Mar 2025
	font-family: 'Roboto Mono', monospace;
	font-size: 0.5rem;
	line-height: 1;
	margin: -2;
	width: auto;
	min-width: fit-content;
	border-collapse: separate;
	margin-left: 0;
}

// /* Table Header Styles */
// thead {
// 	position: sticky;
// 	z-index: 1;

// 	tr.header-text {
// 		position: sticky;
// 		top: 0;
// 		z-index: 3;

// 		th {
// 			// font-size: 0.9rem;
// 			vertical-align: bottom;
// 			text-align: left;

// 			&:first-child {
// 				position: sticky;
// 				left: 0;
// 				z-index: 4;
// 			}

// 			.header-controls {
// 				display: flex;
// 				flex-direction: column;
// 				gap: 0.25rem;
// 				align-items: stretch;
// 				width: 100%;
// 			}

// 			.header-name {
// 				font-weight: bold;
// 				white-space: nowrap;
// 				overflow: hidden;
// 				text-overflow: ellipsis;
// 			}
// 		}
// 	}
// }
input:not([type='checkbox'], [type='radio'], [type='range'], [type='file']) {
	font-family: 'Roboto Mono', monospace;
	font-size: 0.95rem;
	height: 2rem;
	padding: 0.25rem 0.5rem;
	border-radius: 0.25rem;
	width: auto;
	max-width: 18rem;
	box-sizing: border-box;
}

// /* Override container styles with high specificity */
// body .container,
// html body .container,
// div.container {
// 	width: 100%;
// 	max-width: 100%;
// 	margin: 0;
// 	margin-left: 0;
// 	margin-right: 0;
// 	padding: 0rem;
// }

.table-container table {
	margin-top: 0;
	margin-bottom: 0;
}

/* Table container styles for horizontal scrolling */
.table-container {
	max-width: 100%;
	overflow-x: auto;
	margin: 0rem;
	padding: 0rem;
	-webkit-overflow-scrolling: touch;
	padding-bottom: 0rem;
	position: relative;
}

/* Generic: remove all borders for a clean slate (optional, but helps) */
th[class^='col-'],
td[class^='col-'] {
	border: none !important;
}

/* Add cell borders for all cells */
th,
td {
	height: 1.5rem; /* or whatever you want */
	max-height: 1.5rem;
	overflow: hidden; /* prevents content from overflowing */
	vertical-align: middle; /* centers content vertically */
}

/* LAND columns: blue borders */
th.col-landName, td.col-landName,
th.col-hectares, td.col-hectares,
th.col-landNotes, td.col-landNotes
// Add more land columns here if needed
{
	border-left: 0.05rem solid #2196f3 !important;
	border-right: 0.05rem solid #2196f3 !important;
}
th.col-landName,
th.col-hectares,
th.col-landNotes {
	border-top: 0.05rem solid #2196f3 !important;
}

/* CROP columns: green borders */
th.col-cropName, td.col-cropName,
th.col-speciesId, td.col-speciesId,
th.col-seed_info, td.col-seed_info,
th.col-cropStock, td.col-cropStock,
th.col-cropNotes, td.col-cropNotes
// Add more crop columns here if needed
{
	border-left: 0.05rem solid #4caf50 !important;
	border-right: 0.05rem solid #4caf50 !important;
}
th.col-cropName,
th.col-speciesId,
th.col-seed_info,
th.col-cropStock,
th.col-cropNotes {
	border-top: 0.05rem solid #4caf50 !important;
}

.polygon-column {
	position: relative;
	background-color: var(--color-grey) !important;
}

.extra-column {
	border-left: 0.05rem solid #2196f3 !important;
	border-right: 0.05rem solid #2196f3 !important;
}
.gps-column {
	position: relative;
	background-color: var(--color-grey) !important;
}
.table-header {
	position: sticky;
	top: 0;
	z-index: 2;
	background-color: var(--color-black);
}

.toggle-row > div {
	display: flex;
	justify-content: center;
}

.toggle-row > div input[type='checkbox'] {
	margin: 0 auto;
}

.format-selector-row > div {
	display: flex;
	justify-content: center;
	margin-bottom: 0.5rem;
}

.format-selector-row > div input[type='checkbox'] {
	margin: 0 auto;
}

.toggle-row,
.format-selector-row {
	display: flex;
	min-width: fit-content;
}

.toggle-row > div,
.format-selector-row > div {
	width: var(--column-width);
	min-width: var(--column-width);
	max-width: var(--column-width);
	padding: 0.25rem;
	box-sizing: border-box;
}

.table-title {
	margin-bottom: 0.01rem;
	margin-top: 0.4rem;
	font-size: 1rem;
}

/* Remove margin between ToggleComponent and transplant table */
.transplant-toggle-table {
	margin-top: 0 !important;
}

/* Table section styles */
.table-section {
	// margin-bottom: 1rem;
	margin-left: 0;
	padding-left: 0;

	width: 100%;
}

.number-cell {
	text-align: right;
}

tbody td.greyed-out {
	color: rgba(240, 240, 240, 0.25);
	background-color: var(--pico-background-color);
}

tbody td.greyed-out * {
	color: rgba(240, 240, 240, 0.25) !important;
	background-color: var(--pico-background-color);
}

thead th.greyed-out,
// thead th.view-only,
thead th[class*='view-only'],
thead th[class*='greyed-out'] {
	background-color: var(--header-background) !important;
	color: var(--color-white) !important;
	opacity: 1 !important;
	filter: none !important;
}

/* First header sticky */
th:first-child {
	position: sticky;
	left: 0;
	top: 0;
	z-index: 999;
	background-color: var(--header-background);
}

td:first-child {
	position: sticky !important;
	left: 0 !important;
	z-index: 2 !important;
	background-color: var(--pico-background-color) !important;
}

/* All headers sticky at top */
thead th {
	position: sticky;
	top: 0;
	z-index: 998;
	background-color: var(--header-background);
}

/* Target the table headers directly to fill the entire cell */
table thead th {
	padding-bottom: 0.5rem;
	padding-top: 0.3rem;
}

/* Adjust the inner elements to maintain proper spacing */
table thead th > div {
	padding-left: 0.3rem;
	padding-right: 0.3rem;
}

th,
td {
	border: 0.04rem solid var(--color-light-grey); // LEAVE THIS ONE. Chris 4 Mar 2025
	width: var(--column-width);
	min-width: var(--column-width);
	max-width: var(--column-width);
	white-space: nowrap;
	padding: 1px;
	background-color: var(--pico-background-color);

	&:hover {
		background-color: rgb(55, 55, 55);
	}
}

/* Scrollbar styling for better visibility */
.table-container::-webkit-scrollbar {
	height: 8px;
	background-color: var(--color-black);
}

.table-container::-webkit-scrollbar-thumb {
	background-color: var(--color-light-grey);
	border-radius: 4px;
}

.table-container::-webkit-scrollbar-track {
	background-color: var(--color-black);
}
/* format selector styling */
.format-selector-row {
	display: flex;
	justify-content: flex-start;
	overflow-x: visible;
	white-space: nowrap;
	width: 100%;

	/* Apply to all direct children to ensure consistent width */
	> * {
		flex: 0 0 var(--column-width, 7rem);
		padding: 0.25rem;
		width: var(--column-width, 7rem);
		min-width: var(--column-width, 7rem);
		display: flex;
		justify-content: center;
	}

	.format-selector {
		flex: 0 0 var(--column-width, 7rem);
		padding: 0.25rem;
		width: var(--column-width, 7rem);
		min-width: var(--column-width, 7rem);
	}
}

.format-selector select {
	margin-bottom: 0.1rem !important;
	// font-size: 1rem !important;
}

.topform-row {
	display: flex;
	gap: 1rem;
	align-items: flex-start;
	// margin-bottom: 0.5rem;
	max-width: 45rem;
	// font-size: 0.5rem;
}
.topform-row,
.topform-row input,
.topform-row label {
	font-size: 0.7rem;
	min-width: 18rem;
}

.input-block {
	flex: 0 0 auto; // don't stretch, just fit content
	min-width: 12rem;
	position: relative;
}
.text-grey {
	color: grey !important;
	font-size: 0.3rem;
	font-weight: 400;
	opacity: 0.35;
}

tbody td.legal-droptarget {
	border-color: greenyellow;
}

tbody td.legal-droptarget {
	background-color: rgba(76, 175, 80, 0.1);
}

tbody td.drag-over {
	border: 0.05rem solid #4caf50 !important;
	background-color: rgba(76, 175, 80, 0.2) !important;
	cursor: pointer !important;
}

// .force-table-height {
// 	max-height: 4rem;
// }

.polygon-coordinates {
	font-size: 8px;
	white-space: pre-wrap;
	word-break: break-all;
	max-height: 18px;
	overflow: hidden;
	display: block;
	text-overflow: ellipsis;
}
.db-table-container {
	display: flex;
	flex-direction: row;
	width: 100%; // ensures the container itself fills its parent
	height: 100%;
	flex-wrap: wrap;
	margin-top: 1.5rem;
}
.db-table-container table {
	height: 100%;
}

.db-table-dashboard {
	height: 100%;
	border: 1px solid var(--color-light-grey);
	border-radius: 0.1rem;
	padding: 0.25rem;
	margin-right: 0.3rem;
	min-width: var(--column-width);
	max-width: var(--column-width);
	max-height: 5.2rem;
	width: var(--column-width);
}

/* ============================================================================
AUTOCOMPLETE LISTS
============================================================================ */
#autocomplete-items-list {
	/* Override Pico's variable and fallback background */
	--pico-background-color: #a7c0cc44 !important;
	background: #a7c0cc55 !important;
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	flex-direction: column;
	border: 1px solid #2196f355;
	border-radius: 0.25rem;
	min-width: 200px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

#autocomplete-items-list li,
#autocomplete-items-list li.selected,
#autocomplete-items-list li:hover {
	background: transparent !important;
}

#autocomplete-items-list li.selected {
	background-color: #21f35625 !important;
	color: #2196f3 !important;
	border: 0.05rem solid #21f35655;
	border-radius: 0.25rem;
	font-weight: bold;
}

#autocomplete-items-list li:hover {
	background: #6b7980 !important;
}

#stakeholder-autocomplete-list {
	--pico-background-color: #a7c0cc44 !important;
	background: #a7c0cc55 !important;
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	flex-direction: column;
	border: 1px solid #2196f355;
	border-radius: 0.25rem;
	min-width: 200px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
	position: absolute;
	z-index: 10;
}

#stakeholder-autocomplete-list li,
#stakeholder-autocomplete-list li.selected,
#stakeholder-autocomplete-list li:hover {
	background: transparent !important;
}

#stakeholder-autocomplete-list li.selected {
	background-color: #2196f355 !important;
	color: #2196f3 !important;
	border: 0.05rem solid #2196f355;
	border-radius: 0.25rem;
	font-weight: bold;
}

#stakeholder-autocomplete-list li:hover {
	background: #6b7980 !important;
}

/* Make just the Project and Organization name placeholders red */
input[placeholder='Project name *']::placeholder,
input[placeholder='Organization name *']::placeholder {
	color: #e53935 !important;
	opacity: 0.6; /* Ensures full color in some browsers */
	// font-family: 'IBM Plex Mono' !important;
	font-weight: 100; /* thinnest weight */
	letter-spacing: 0.05em; /* subtle spacing enhances thinness */
}
input[placeholder='Project Notes']::placeholder {
	color: var(--color-grey) !important;
	opacity: 0.5; /* Ensures full color in some browsers */
	// font-family: 'IBM Plex Mono' !important;
	font-weight: 100; /* thinnest weight */
	letter-spacing: 0.05em; /* subtle spacing enhances thinness */
}
/* =====================
   Drag-and-Drop Table Compatibility Styles
   ===================== */

/*
Outline/Indication: Shows when a target is compatible (legal drop target)
Active/Drag-Over: Shows when a target is being hovered (drag-over)
*/

.isGpsMatch {
	border: 0.05rem solid #2196f3 !important;
	background-color: rgba(243, 142, 27, 0.2) !important;
}

th.legal-droptarget {
	border: 0.05rem solid #4caf50;
	background-color: rgba(76, 175, 80, 0.1);
	cursor: pointer !important;
}

.land-table th.legal-droptarget {
	border: 0.05rem solid #2196f3 !important;
	background-color: rgba(33, 150, 243, 0.1) !important;
}
.crop-table th.legal-droptarget {
	border: 0.05rem solid #4caf50 !important;
	background-color: rgba(76, 175, 80, 0.1) !important;
}
.planting-table th.legal-droptarget {
	border: 0.05rem solid #f38e1b !important;
	background-color: rgba(243, 142, 27, 0.1) !important;
}

/* Compatible target outline for table cells */
.compatible-target {
	border: 0.05rem dashed #4caf50;
	background-color: rgba(76, 175, 80, 0.1);
	cursor: pointer !important;
}
.land-table .compatible-target {
	border: 0.05rem dashed #2196f3;
	background-color: rgba(33, 150, 243, 0.08);
}
.crop-table .compatible-target {
	border: 0.05rem dashed #4caf50;
	background-color: rgba(76, 175, 80, 0.08);
}
.planting-table .compatible-target {
	border: 0.05rem dashed #f38e1b;
	background-color: rgba(243, 142, 27, 0.08);
}

/* Active/Drag-Over Styles */
.drag-over {
	border: 0.05rem solid #4caf50 !important;
	background-color: rgba(76, 175, 80, 0.2) !important;
	cursor: pointer !important;
}
.land-table .drag-over,
.land-table.drag-over {
	border: 0.05rem solid #2196f3 !important;
	background-color: rgba(33, 150, 243, 0.2) !important;
}
.crop-table .drag-over,
.crop-table.drag-over {
	border: 0.05rem solid #4caf50 !important;
	background-color: rgba(76, 175, 80, 0.2) !important;
}
.planting-table .drag-over,
.planting-table.drag-over {
	border: 0.05rem solid #f38e1b !important;
	background-color: rgba(243, 142, 27, 0.2) !important;
}

/* =====================
   End Drag-and-Drop Table Compatibility Styles
   ===================== */
//    .view-only {
// 	background-color: var(--color-light-grey);
// 	cursor: not-allowed;
// 	/* margin-bottom: -1rem; */
// }

.greyed-out {
	opacity: 0.7;
	background-color: rgba(128, 128, 128, 0.2);
	/* margin-bottom: -1rem; */
}

.greyed-out th:not(.legal-droptarget),
.greyed-out td:not(.legal-droptarget) {
	background-color: var(--color-light-grey);
	cursor: not-allowed;
}

.no-table-bottom-margin {
	margin-bottom: 0rem;
}

/* Table border color rules grouped for clarity */
.land-table {
	border: 0.05rem solid #2196f3;
}
.crop-table {
	border: 0.05rem solid #4caf50;
}
.planting-table {
	border: 0.05rem solid #f38e1b;
}

/* Required field styling that works with the actual HTML structure */

/* Style for the th element with required-field class */
th.required-field {
	position: relative;
}

/* Style for the span inside th that has required-mapped or required-unmapped class */
th span.required-mapped {
	position: relative;
	display: block;
	border-left: 0.05rem solid #4caf50;
	padding-left: 5px;
	font-weight: bold;
}

/* Remove global asterisk styling to avoid conflicts */
th.required-field span:not([class^='format-']):after {
	content: none; /* Completely remove the global asterisk */
}

/* Existing compatible target styles */
.compatible-target {
	border: 0.05rem dashed #4caf50;
	background-color: rgba(76, 175, 80, 0.1);
	cursor: pointer;
}

td {
	padding: 8px;
	overflow: hidden;
}

td:first-child {
	position: sticky;
	left: 0;
	z-index: 2;
	background-color: var(--pico-background-color);
}

select {
	/* Reset Pico CSS variables that affect borders */
	--pico-border-color: var(--color-light-grey);
	--pico-border-width: 0.05rem;
	--pico-form-element-border-color: var(--color-light-grey);
	background-color: var(--color-grey);
	border-width: 0.05rem;
	border-style: solid;
	border-color: var(--color-light-grey);
	margin-bottom: -0.1rem;
	font-size: 0.5rem;
	/* cSpell:disable-next-line */
	background-image: url("data:image/svg+xml;charset=UTF-8,%3csvs xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
	padding: 0.2rem 1.5rem 0.2rem 0.4rem;
	color: var(--color-white);
	cursor: pointer;
	&:hover {
		background-color: var(--color-light-grey);
	}
}

.header-text {
	font-weight: bold;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	text-align: left;
	margin-top: 0.25rem;
	user-select: text;
	-webkit-user-select: text;
	-moz-user-select: text;
	-ms-user-select: text;
	cursor: text;
}

.number-cell {
	text-align: right;
}

.toggled-off {
	background-color: rgba(255, 0, 0, 0.2);
}

button,
[format='button'],
[format='submit'],
[format='reset'],
[format='file'] {
	max-width: var(--button-max-width);
	width: auto;
	cursor: pointer;
	&:hover {
		opacity: 0.6;
		transition: opacity 0.3s ease;
	}
}

/* Transform Button Styles */
.transform-button {
	background: var(--button-background);
	color: var(--button-color);
	border: 0.04rem solid var(--color-light-grey);
	padding: var(--button-padding);
	margin: var(--button-margin);
	border-radius: var(--button-radius);
	font-size: var(--button-font-size);
	cursor: pointer;
	transition: var(--button-transition);
}

button.material-symbols-outlined {
	background: none;
	border: none;
	padding: 0rem;
	/* keep your icon style below */
	//   font-size: var(--button-font-size);
	vertical-align: -0.2rem;
	//   align-items: center;
	font-size: 0.9rem;
	margin-bottom: -0.3rem;
	margin-top: -0.2rem;
	// padding-bottom: -0.25rem;
}
/* View toggle buttons */
button {
	padding: 0.1rem 0.5rem;
	white-space: nowrap;

	/* Optional: Add specific class if you want to target only these buttons */
	&.view-toggle {
		margin-left: 0.5rem;
	}
}

.header-container {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding-bottom: -0.5rem !important;
	margin-bottom: -1.2rem !important;
	width: 100%;
}

.import-dropzone {
	background-color: var(--header-background) !important;
}

.mapped-indicator {
	font-size: 0.7rem;
	color: #4caf50;
	display: block;
	margin-top: 0.25rem;
}

.drag-over {
	background-color: rgba(76, 175, 80, 0.2);
}

.compatible-target {
	border: 0.05rem dashed #4caf50;
	background-color: rgba(76, 175, 80, 0.1);
	cursor: pointer;
}

.incompatible-target {
	opacity: 0.5;
	cursor: not-allowed;
}

/* Drag and drop cursor styling */
[draggable='true'],
[draggable='true'] * {
	cursor: grab;
}

[draggable='true']:active,
[draggable='true']:active * {
	cursor: grabbing;
}

/* Make all cells in the source table appear draggable */
.table-container table tbody td {
	cursor: grab;
}

/* ============================================================================
   BREAKPOINTS 
   ============================================================================ */
@media (max-width: 768px) {
	th,
	td {
		width: 9rem;
		max-width: 9rem;
	}

	.table-container {
		overflow-x: auto;
		-webkit-overflow-scrolling: touch;
	}
}
